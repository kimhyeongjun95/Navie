{% extends 'base.html' %}

{% block content %}
<link rel="stylesheet" href="/static/css/index.css">
  <div class="slide_wrap">
    <ul class="slides">
      {% for movie in recent_movies %}
          <li>
            <a href="{% url 'movies:detail_movie' movie.pk %}" style="padding: 0px;">
              <img src="https://image.tmdb.org/t/p/original{{movie.poster_path}}" width="200" height="310" alt="movie-poster">
            </a>
          </li>
      {% endfor %}
    </ul>
  </div>
  <p class="controls">
    <span class="prev">뒤</span>
    <span class="next">앞</span>
  </p>

  <!-- 최신 영화
  {% for movie in recent_movies %}
    <a href="{% url 'movies:detail_movie' movie.pk %}">
      <img src="https://image.tmdb.org/t/p/original{{movie.poster_path}}" width="200" height="310" alt="movie-poster">
    </a>
  {% endfor %} -->

  <!-- {% for movie in action_movies %}
    <a href="{% url 'movies:detail_movie' movie.pk %}">
      <img src="https://image.tmdb.org/t/p/original{{movie.poster_path}}" width="200" height="310" alt="movie-poster">
    </a>
    <br>
  {% endfor %} -->

<script>
  let slides = document.querySelector('.slides');
  let slide = document.querySelectorAll('.slides li');
  console.log(slide)
  let currentIdx = 0;
  let slideCount = slide.length;
  let prevBtn = document.querySelector('.prev')
  let nextBtn = document.querySelector('.next')
  let slideWidth = 200;
  let slideMargin = 0;

  slides.style.width = (slideWidth + slideMargin) * slideCount - slideMargin + 'px';
  
  function moveSlide(num) {
    slides.style.left = -num * 200 + 'px';
    currentIdx = num;
  }

  nextBtn.addEventListener('click', function() {
    // slide count에서 몇개를 보여줄지를 기준으로 빼줘야한다.
    if(currentIdx < slideCount - 3){
      moveSlide(currentIdx + 1);
    } else {
      moveSlide(0);
    }
  });
  prevBtn.addEventListener('click', function() {
    if(currentIdx > 0){
      moveSlide(currentIdx - 1);
    } else {
      moveSlide(slideCount-3);
    }
  });
</script>
{% endblock %}
